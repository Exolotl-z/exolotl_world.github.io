# 更新日志 | Changelog

## v1.4.0 - 2025-10-30

### 🔐 权限保护系统 Permission System

#### 密码验证功能
- ✅ 创建Auth权限验证模块（`js/auth.js`）
- ✅ SHA-256密码加密存储
- ✅ 会话管理（sessionStorage，24小时有效）
- ✅ 默认密码：`admin123`（请修改）
- ✅ 支持修改密码和重置密码

#### 博客管理保护
- ✅ 博客管理页面需要密码访问
- ✅ 未登录自动显示登录对话框
- ✅ 登录后可正常编辑文章

#### 奇思妙想保护
- ✅ 未登录隐藏"添加想法"按钮
- ✅ 卡片不显示编辑、删除、置顶按钮
- ✅ 访客只能查看内容
- ✅ 点击任何编辑操作时提示登录
- ✅ 登录后显示所有编辑功能

#### 数据面板保护
- ✅ 未登录隐藏"添加任务"表单
- ✅ TODO项不显示编辑、删除按钮
- ✅ 禁用复选框交互
- ✅ 禁用拖拽排序功能
- ✅ 访客只能查看数据
- ✅ 点击任何编辑操作时提示登录

### 🎨 界面优化 UI Improvements
- ✅ 优雅的登录对话框设计
- ✅ 黑白极简风格登录界面
- ✅ 平滑的权限切换动画
- ✅ 未登录状态下隐藏编辑控件

### 🔧 技术实现 Technical Implementation

#### Auth类功能
```javascript
- hashPassword(password)      // SHA-256加密
- verifyPassword(password)    // 验证密码
- login(password)             // 登录
- isAuthenticated()           // 检查登录状态
- logout()                    // 登出
- changePassword(old, new)    // 修改密码
- showLoginDialog(message)    // 显示登录框
- protectPage()               // 页面保护
```

#### 权限检查机制
- **页面级保护**：管理页面自动重定向
- **功能级保护**：隐藏编辑控件
- **操作级保护**：点击时权限验证

### 💾 数据存储
- **auth_password_hash** (localStorage): 密码哈希值
- **auth_session** (sessionStorage): 登录会话（24小时）

### 📝 使用说明

#### 如何登录？
1. 访问博客管理、奇思妙想或数据面板页面
2. 如未登录，自动弹出登录对话框
3. 输入密码（默认：`admin123`）
4. 会话保持24小时

#### 如何修改密码？
在浏览器控制台执行：
```javascript
await auth.changePassword('admin123', '你的新密码');
```

#### 如何重置密码？
在浏览器控制台执行：
```javascript
await auth.resetPassword();
// 密码重置为默认值：admin123
```

### ⚠️ 安全提示
- 首次使用请立即修改默认密码
- 密码使用SHA-256加密存储在本地
- 会话有效期24小时
- 部署到GitHub Pages后需要修改密码
- LocalStorage数据可被查看，请勿存储敏感信息

### 🎯 权限控制范围

| 页面/功能 | 未登录 | 已登录 |
|----------|--------|--------|
| 博客管理页 | 🚫 需要登录 | ✅ 完全访问 |
| 博客展示页 | ✅ 可查看 | ✅ 可查看 |
| 奇思妙想（查看） | ✅ 可查看 | ✅ 可查看 |
| 奇思妙想（编辑） | 🚫 隐藏按钮 | ✅ 可编辑 |
| 数据面板（查看） | ✅ 可查看 | ✅ 可查看 |
| 数据面板（编辑） | 🚫 隐藏控件 | ✅ 可编辑 |

---

## v1.3.0 - 2025-10-30

### ✨ 新增功能 New Features

#### 自定义分类管理
- ✅ 在博客管理页面可以添加自定义分类
- ✅ 分类名称自由设置
- ✅ 自动生成分类ID（slug化）
- ✅ 分类数据保存到LocalStorage
- ✅ 博客页面自动同步显示自定义分类

#### 智能标签系统
- ✅ 标签输入支持回车和逗号添加
- ✅ 已选标签可视化展示，点击删除
- ✅ 显示常用标签推荐（按使用频率排序）
- ✅ 点击推荐标签快速添加
- ✅ 博客页面动态显示热门标签
- ✅ 热门标签按使用频率自动排序
- ✅ 点击热门标签自动搜索相关文章

#### 博客页面优化
- ✅ 分类筛选器动态生成
- ✅ 热门标签云动态生成
- ✅ 分类和标签数据实时同步
- ✅ 支持自定义分类和默认分类混合使用

### 🎨 界面改进 UI Improvements
- ✅ 标签输入框优化体验（卡片式展示）
- ✅ 添加分类按钮（+号图标）
- ✅ 已选标签卡片式展示，支持点击删除
- ✅ 推荐标签点击交互
- ✅ 热门标签点击搜索

### 🔧 技术改进 Technical Improvements
- **分类数据结构**：`{ id, name, icon }`
- **标签数组**：直接存储在文章中
- **数据存储**：使用LocalStorage持久化
- **动态渲染**：自动同步更新
- **ID生成**：自动slug化分类名称

### 📝 使用说明

#### 如何添加自定义分类？
1. 打开博客管理页面
2. 点击“上传Markdown文件”或“编辑文章”
3. 在分类下拉框旁点击“+”按钮
4. 输入新分类名称（如“机器学习”、“生活分享”）
5. 新分类会自动保存并在博客页面显示

#### 如何使用标签？
1. **添加标签**：
   - 在标签输入框中输入标签名
   - 按回车键或逗号添加
   - 或点击下方的推荐标签

2. **删除标签**：
   - 点击已选标签上的“×”号

3. **查看热门标签**：
   - 博客页面侧边栏自动显示热门标签
   - 点击标签搜索相关文章

### 💾 数据存储
- **blog_articles**: 文章数据
- **blog_categories**: 自定义分类
- **blog_tags**: 标签使用统计（自动从文章中提取）

---

## v1.2.0 - 2025-10-30

### 🐛 修复 Bug Fixes

#### 导航栏统一
- ✅ 修复首页导航栏与其他页面不一致的问题
- ✅ 所有页面导航栏现在显示：首页 | 博客 | 奇思妙想 | 数据面板
- ✅ 统一所有页面的Logo文字为"我的空间"

#### 导航栏样式优化
- ✅ 导航链接文字改为灰色（`--text-secondary`），更加明显
- ✅ 悬停和激活状态改为深色（`--text-primary`）
- ✅ 下划线由2px改为1px，更精致

#### 页脚统一
- ✅ 所有页面页脚改为统一内容：
  ```
  万物皆虚，万物皆允
  登楼撤梯，见月忽指
  ```
- ✅ 删除原有的版权和装饰图标

#### 按钮样式优化
- ✅ 主按钮（btn-primary）：黑底白字 → 悬停变灰
- ✅ 次按钮（btn-secondary）：透明底黑框 → 悬停反色
- ✅ 回到顶部按钮：方形设计，白底黑框，悬停反色

### ✅ 检查完成
- ✅ 所有HTML文件无语法错误
- ✅ 所有CSS文件无语法错误
- ✅ 导航栏在所有页面显示一致
- ✅ 页脚在所有页面显示一致
- ✅ 样式符合极简北欧风格

---

## v1.1.0 - 2025-10-29

### 🎨 设计改版 Design Update

#### 极简黑白北欧风格
- 全面改为黑白灰配色方案
- 去除所有彩色渐变
- 使用细线边框（1px）
- 柔和阴影效果
- 方形设计语言

#### 配色方案
- 主色：`#1a1a1a` (深黑)
- 背景：`#ffffff` (纯白)、`#fafafa` (浅灰)
- 文字：`#1a1a1a`、`#666666`、`#999999`
- 边框：`#e8e8e8`

### ✨ 新功能 New Features

#### 奇思妙想系统
- 新增 `ideas.html` 页面
- 支持添加、编辑、删除想法
- 支持置顶功能（最多3个）
- 本地存储数据
- 优雅的模态框交互

#### 首页更新
- 项目作品集改为奇思妙想卡片展示
- 自动显示置顶的想法
- "查看更多"按钮跳转到完整页面

#### 联系方式更新
- GitHub
- 小红书
- 微信（点击显示微信号）
- Email

### 🔄 其他改动 Other Changes
- 导航栏新增"奇思妙想"链接
- 所有页面导航栏统一
- 响应式设计完全支持

---

## v1.0.0 - 2025-10-28

### 🚀 初始版本 Initial Release

- ✅ 首页（英雄区、技能云、作品集）
- ✅ 博客系统（列表、详情、搜索、分类）
- ✅ 数据面板（日历、TODO、图表）
- ✅ 完整响应式设计
- ✅ 无障碍访问支持
